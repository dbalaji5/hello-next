{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport '@shopify/polaris/styles.css';\nimport { AppProvider, Layout, Card, Scrollable, Page } from '@shopify/polaris';\nimport './Comparator.css';\nimport axios from 'axios';\nimport dynamic from 'next/dynamic';\nvar Pieplot = dynamic(function () {\n  return import('./PiePlot');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('./PiePlot')];\n    },\n    modules: ['./PiePlot']\n  }\n});\nvar MapsComp = dynamic(function () {\n  return import('./MapsComp');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('./MapsComp')];\n    },\n    modules: ['./MapsComp']\n  }\n});\n\nvar Comparator =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Comparator, _React$Component);\n\n  function Comparator(props) {\n    var _this;\n\n    _classCallCheck(this, Comparator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Comparator).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"stylesetter\", function (e) {\n      var n = e.target.parentElement.nextSibling;\n      var p = e.target.parentElement.previousSibling;\n      e.target.parentElement.style = \"background:#4157c559\";\n\n      while (n) {\n        n.style.background = \"white\";\n        n = n.nextSibling;\n      }\n\n      while (p) {\n        p.style.background = \"white\";\n        p = p.previousSibling;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"comparator\", function (val, cat) {\n      if (cat === 'A') {\n        _this.setState({\n          valA: val\n        });\n      } else {\n        _this.setState({\n          valB: val\n        });\n      }\n\n      if (_this.state.valA !== \"\" && _this.state.valB !== \"\") {\n        var tempArr = [];\n        tempArr.push(_this.state.valA);\n        tempArr.push(_this.state.valB);\n\n        _this.setState({\n          loading: true\n        });\n\n        var param = {};\n        param['index'] = tempArr;\n        console.log(param);\n        axios.get('http://localhost:5000/rest/comparisor/', {\n          params: tempArr\n        }).then(function (result) {\n          console.log(result.data.result);\n\n          _this.setState({\n            compres: result.data.result,\n            loading: false\n          });\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function (e) {\n      _this.stylesetter(e);\n\n      var par = {};\n      par['value'] = e.target.textContent;\n      console.log(par);\n      axios.get('http://localhost:5000/rest/pie/', {\n        params: par\n      }).then(function (result) {\n        _this.setState({\n          weight1: result.data.pie['weight'],\n          variable1: result.data.pie['variable'],\n          pieLoading1: true\n        });\n\n        _this.comparator(par['value'], 'A');\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick2\", function (e) {\n      _this.stylesetter(e);\n\n      var par = {};\n      par['value'] = e.target.textContent;\n      axios.get('http://localhost:5000/rest/pie/', {\n        params: par\n      }).then(function (result) {\n        _this.setState({\n          weight2: result.data.pie['weight'],\n          variable2: result.data.pie['variable'],\n          pieLoading2: true\n        });\n\n        _this.comparator(par['value'], 'B');\n      });\n    });\n\n    _this.state = {\n      index1: [],\n      index2: [],\n      weight1: [],\n      variable1: [],\n      weight2: [],\n      variable2: [],\n      valA: \"\",\n      valB: \"\",\n      pieLoading1: false,\n      pieLoading2: false,\n      compres: {},\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(Comparator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch(\"http://localhost:5000/rest/collector/\").then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        console.log(result.indices['index1']);\n        console.log(result.indices['index2']);\n\n        _this2.setState({\n          index1: result.indices['index1'],\n          index2: result.indices['index2']\n        });\n      }, // Note: it's important to handle errors here\n      // instead of a catch() block so that we don't swallow\n      // exceptions from actual bugs in components.\n      function (error) {\n        _this2.setState({\n          isLoaded: true,\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return __jsx(AppProvider, null, __jsx(Page, {\n        fullWidth: true,\n        separator: true\n      }, __jsx(Layout, null, __jsx(Layout.Section, {\n        oneThird: true,\n        primary: true\n      }, __jsx(Card, {\n        title: \"IndexA\"\n      }, __jsx(Scrollable, {\n        shadow: true,\n        style: {\n          height: '60vh'\n        }\n      }, __jsx(\"div\", null, __jsx(\"ul\", {\n        id: \"myUL\"\n      }, this.state.index1.map(function (item) {\n        return __jsx(\"li\", {\n          key: item + 'A'\n        }, __jsx(\"span\", {\n          \"class\": \"caret ind1\",\n          onClick: _this3.handleClick\n        }, item));\n      }))))), __jsx(Card, {\n        title: \"Proportion Chart\"\n      }, __jsx(\"div\", null, this.state.pieLoading1 ? __jsx(Pieplot, {\n        weight: this.state.weight1,\n        variable: this.state.variable1,\n        title: this.state.gtitle\n      }) : __jsx(\"p\", null, \"Waiting for the Selection\")))), __jsx(Layout.Section, {\n        oneThird: true,\n        secondary: true\n      }, __jsx(Card, {\n        title: \"IndexB\"\n      }, __jsx(Scrollable, {\n        shadow: true,\n        style: {\n          height: '60vh'\n        }\n      }, __jsx(\"div\", null, __jsx(\"ul\", {\n        id: \"myUL\"\n      }, this.state.index2.map(function (item) {\n        return __jsx(\"li\", {\n          key: item + 'B'\n        }, __jsx(\"span\", {\n          \"class\": \"caret ind1\",\n          onClick: _this3.handleClick2\n        }, item));\n      }))))), __jsx(Card, {\n        title: \"Proportion Chart\"\n      }, __jsx(\"div\", null, this.state.pieLoading2 ? __jsx(Pieplot, {\n        weight: this.state.weight2,\n        variable: this.state.variable2,\n        title: this.state.gtitle\n      }) : __jsx(\"p\", null, \"Waiting for the Selection\")))), __jsx(Layout.Section, {\n        oneHalf: true\n      }, __jsx(Card, {\n        title: \"Maps\"\n      }, __jsx(MapsComp, {\n        data: this.state.compres,\n        loading: this.state.loading\n      }))))));\n    }\n  }]);\n\n  return Comparator;\n}(React.Component);\n\nexport default Comparator;","map":null,"metadata":{},"sourceType":"module"}