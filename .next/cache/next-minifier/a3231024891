{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{\"2iSZ\":function(t,e,a){\"use strict\";a.r(e);var n=a(\"0iUn\"),o=a(\"sLSF\"),i=a(\"MI3g\"),s=a(\"a7VT\"),p=a(\"AT/M\"),l=a(\"Tit0\"),r=a(\"vYYK\"),c=a(\"q1tI\"),u=a.n(c),h=a(\"r1Ps\"),f=a(\"qnQ4\"),g=a(\"jppB\"),d=a(\"fX4H\"),m=a(\"Qrup\"),b=a(\"zJCT\"),O=a(\"eveI\"),y=a(\"w5k+\"),j=a(\"4R65\"),E=a(\"VhEB\"),L=a(\"i8i4\"),w=a(\"HVLH\"),v=a(\"wnKL\"),k=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,Object(y.a)(Object(b.a)(e),\"onPopupOpen\",(function(t){t.popup===e.leafletElement&&e.onOpen()})),Object(y.a)(Object(b.a)(e),\"onPopupClose\",(function(t){t.popup===e.leafletElement&&e.onClose()})),Object(y.a)(Object(b.a)(e),\"onRender\",(function(){!1!==e.props.autoPan&&e.leafletElement.isOpen()&&(e.leafletElement._map&&e.leafletElement._map._panAnim&&(e.leafletElement._map._panAnim=void 0),e.leafletElement._adjustPan())})),e}Object(O.a)(e,t);var a=e.prototype;return a.getOptions=function(e){return Object(m.a)({},t.prototype.getOptions.call(this,e),{autoPan:!1})},a.createLeafletElement=function(t){var e=this.getOptions(t);return e.autoPan=!1!==t.autoPan,new j.Popup(e,t.leaflet.popupContainer)},a.updateLeafletElement=function(t,e){e.position!==t.position&&this.leafletElement.setLatLng(e.position)},a.componentDidMount=function(){var t=this.props.position,e=this.props.leaflet,a=e.map,n=e.popupContainer,o=this.leafletElement;null!=a&&a.on({popupopen:this.onPopupOpen,popupclose:this.onPopupClose}),n?n.bindPopup(o):(t&&o.setLatLng(t),o.openOn(a))},a.componentWillUnmount=function(){var e=this.props.leaflet.map;null!=e&&(e.off({popupopen:this.onPopupOpen,popupclose:this.onPopupClose}),e.removeLayer(this.leafletElement)),t.prototype.componentWillUnmount.call(this)},e}(function(t){function e(e){var a;return a=t.call(this,e)||this,Object(y.a)(Object(b.a)(a),\"onClose\",(function(){a.props.onClose&&a.props.onClose()})),Object(y.a)(Object(b.a)(a),\"onOpen\",(function(){a.forceUpdate(),a.props.onOpen&&a.props.onOpen()})),a.leafletElement=a.createLeafletElement(e),a}Object(O.a)(e,t);var a=e.prototype;return a.createLeafletElement=function(t){throw new Error(\"createLeafletElement() must be implemented\")},a.updateLeafletElement=function(t,e){},a.componentDidUpdate=function(t){Object(v.a)(this.leafletElement._container,t.className,this.props.className),this.updateLeafletElement(t,this.props),this.leafletElement.isOpen()&&(this.leafletElement.update(),this.onRender())},a.onRender=function(){},a.render=function(){return this.leafletElement._contentNode?Object(L.createPortal)(this.props.children,this.leafletElement._contentNode):null},e}(w.a));Object(y.a)(k,\"defaultProps\",{pane:\"popupPane\"});var S=Object(E.b)(k),C=(a(\"bMVF\"),a(\"Pr2q\")),P=(a(\"kdv+\"),a(\"6mVS\")),x=a(\"vDqi\"),D=a.n(x),I=a(\"a6RD\"),U=a.n(I),A=u.a.createElement,Y=U()((function(){return Promise.all([a.e(3),a.e(0),a.e(14)]).then(a.bind(null,\"cKRR\"))}),{ssr:!1,loadableGenerated:{webpack:function(){return[\"cKRR\"]},modules:[\"./BarPlot\"]}}),X=0,R=0,_=0,F=function(t){function e(t){var a;return Object(n.a)(this,e),a=Object(i.a)(this,Object(s.a)(e).call(this,t)),Object(r.a)(Object(p.a)(a),\"getColor\",(function(t){return t>=-1&&t<-.75?\"#a50026\":t>=-.75&&t<-.6?\"#d73027\":t>=-.6&&t<-.4?\"#f46d43\":t>=-.4&&t<-.2?\"#fdae61\":t>=-.2&&t<0?\"#fee08b\":t>=.01&&t<.1?\"#d9ef8b\":t>=.1&&t<.3?\"#a6d96a\":t>=.3&&t<.5?\"#66bd63\":t>=.5&&t<.75?\"#1a9850\":t>=.75&&t<=1?\"#006837\":t>=0&&t<.01?\"#ffffff\":\"#000000\"})),Object(r.a)(Object(p.a)(a),\"onEachFeature2\",(function(t,e){0===a.state.intdata.length?a.setState({iLoading:!1}):a.setState({iLoading:!0}),e.on(\"click\",(function(e){if(a.state.iLoading){var n={};n.DAUID=t.properties.DAUID,a.setState({cmpload:!0}),D.a.get(\"http://localhost:5000/rest/explainer/\",{params:n}).then((function(t){for(var e=[],n=[],o=t.data.exp,i=0;i<o.length;i++)n.push(o[i][1]),e.push(o[i][0]);a.setState({intX:e,intY:n,cmpload:!0})}))}a.setState({ipopup:!0,iposition:e.latlng,key:X++,ititle:t.properties.DAUID})}))})),Object(r.a)(Object(p.a)(a),\"onEachFeature\",(function(t,e){var n=t.properties.DAUID;e.on(\"click\",(function(t){if(a.setState({gpopup:!0,position:t.latlng,key:X++}),0===a.state.gendata.length?a.setState({gLoading:!1}):a.setState({gLoading:!0}),a.state.gLoading)for(var e=0;e<a.state.gendata.length;e++)if(a.state.gendata[e].DAUID===n){var o=\"Index:\"+a.state.gendata[e].Index;a.setState({genX:a.state.gendata[e].X,genY:a.state.gendata[e].Y,gtitle:o});break}})),0===a.state.gendata.length?a.setState({gLoading:!1}):a.setState({gLoading:!0})})),a.state={weight:.5,opacity:1,color:\"#ffcc99\",color2:\"#ff66b2\",gpopup:!1,ipopup:!1,position:[],iposition:[],gtitle:\"\",ititle:\"\",key:X++,gkey:R++,ikey:_,gLoading:!1,iLoading:!1,genres:{},intres:{},gendata:[],intdata:[],genX:[],genY:[],intX:[],intY:[],ajaxload:!1,cmpload:!1,iweight:{}},a}return Object(l.a)(e,t),Object(o.a)(e,[{key:\"componentDidUpdate\",value:function(t,e){(this.props.genres!==e.genres&&this.props.gendata!==e.gendata||this.props.intres!==e.intres&&this.props.intdata!==e.intdata||this.props.ajaxload!==e.ajaxload||this.props.iweight!==e.iweight)&&this.setState({genres:this.props.genres,gendata:this.props.gendata,gkey:R,ikey:_,intres:this.props.intres,intdata:this.props.intdata,weight:1,ajaxload:this.props.ajaxload,iweight:this.props.iweight})}},{key:\"render\",value:function(){var t=this;return A(P.e.Section,{oneHalf:!0},A(P.c,{title:\"Visualization\"},0==this.state.ajaxload?A(h.a,{center:[44.755113,-63.320488],zoom:9,style:{height:\"60vh\"}},A(f.a,{attribution:'\\xa9 <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',url:\"http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png\"}),A(g.a,{position:\"topright\"},A(g.a.BaseLayer,{name:\"Index\",checked:\"true\"},A(d.a,{ref:\"geojson2\",data:C,style:function(e){var a=e.properties.DAUID;if(t.state.gendata.length>0)return{fillColor:t.getColor(t.state.genres[a]),color:t.getColor(t.state.genres[a]),opacity:1,fillOpacity:.3,weight:t.state.iweight[a]}},onEachFeature:function(e,a){return t.onEachFeature(e,a)}}),this.state.gpopup&&A(S,{key:this.state.key,position:this.state.position,onClose:function(){t.setState({popup:!1})}},A(\"div\",{style:{width:\"320px\",height:\"240px\"}},this.state.gLoading?A(Y,{X:this.state.genX,Y:this.state.Y,title:this.state.title}):A(P.k,{accessibilityLabel:\"Spinner example\",size:\"large\",color:\"teal\"})))),A(g.a.BaseLayer,{name:\"Interpret\"},A(d.a,{key:this.state.ikey,ref:\"geojson\",data:C,style:function(e){var a=e.properties.DAUID;if(t.state.intdata.length>0)return{fillColor:t.getColor(t.state.intres[a]),color:t.getColor(t.state.intres[a]),opacity:1,fillOpacity:.3,weight:t.state.iweight[a]}},onEachFeature:function(e,a){return t.onEachFeature2(e,a)}}),this.state.ipopup&&A(S,{key:this.state.key,position:this.state.iposition,onClose:function(){t.setState({ipopup:!1})}},A(\"div\",{style:{width:\"320px\",height:\"240px\"}},this.state.iLoading&&this.state.cmpload?A(Y,{X:this.state.intX,Y:this.state.intY,title:this.state.ititle}):A(P.k,{accessibilityLabel:\"Spinner example\",size:\"large\",color:\"teal\"})))))):A(P.k,{accessibilityLabel:\"Spinner example\",size:\"large\",color:\"teal\"})))}}]),e}(u.a.Component);e.default=F}}]);"}